# 判斷兩線段是否相交

>[!note]
>非常的重要，2025 TOPC 有出過


## 解說

在一般數學裡可以用`y = ax + b` 來判斷，不過在程式裡這樣很麻煩

所以這裡是用 `向量外積(叉積)`

>[!tip]
> 向量內積分為以下
>- < 0 左側
>- \> 0 右側
>- = 相交

給兩線段 ab cd

先判斷 c 於 ab 在左邊還是右邊 在判斷 d 在左還是右。即可判斷是否相交

- 注意還要判斷是否**三點共線**

>[!important]
> 因為這裡為判斷線段是否共線，所以須考慮範圍!!


- 向量公式

```py
a = (x1, y1) , b = (x2, y2)

v = x1y2 - y1x2 ## 內內外外 ， = 0 為不同方向
```

>[!important]
> 雖然不同方向的直線一定會相交，但是這裡考慮的是**線段**，所以只能用一點一線的方法!!


```py
# ab 為線段
# p 為要判斷的點
# ab(向量) * ap(向量) 
(b.x-a.x, b.y-a.y) * (p.x-a.x, p.y-a.y)

## 叉積公式 => 內內外外

(b.y - a.y) * (p.x - a.x) - (b.x - .x) * (p.y - a.y)

# > 0 右邊
# < 0 左邊
# = 0 在線上(但不一定在**線段**上)
```
## 考慮三點共線情況

剛剛有說過 `ab * ap = 0` 為三點共線，但是還要看 `p` 是否在 `ab` 的範圍裡(這樣就是在線段上)

- 判斷

```py
min(a.x, b.x) <= p.x <= max(a.x, b.x)
min(a.y, b.y) <= p.y <= max(a.y, b.y)
``` 

